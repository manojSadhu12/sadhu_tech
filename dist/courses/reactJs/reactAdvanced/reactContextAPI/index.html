<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <base href=/ > <link href="https://fonts.googleapis.com/css2?family=Solway:wght@300;400&display=swap" rel=stylesheet> <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel=stylesheet> <link href=global.css rel=stylesheet> <link href=my_styles.css rel=stylesheet> <link href=prism.css rel=stylesheet> <link href=manifest.json rel=manifest> <link href=favicon.png rel=icon type=image/png> <script src=prismLineHighlight.js></script> <link href=../static/my_styles.css rel=stylesheet> <link href=client/main.588052814.css rel=stylesheet><link href=client/_layout.df5ad919.css rel=stylesheet><link href=client/client.9c259cf4.css rel=stylesheet><link href=client/Image.c8019b1e.css rel=stylesheet><link href=client/index.7beba4f9.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>React Context API</title><meta content="How to use Context API in react class components." name=description><noscript id=sapper-head-end></noscript> </head> <body class=line-numbers> <div id=sapper> <header class="flex flex-wrap fixed h-16 items-center left-0 p-0 secondary-bg top-0 w-screen z-30" style=""><a href=.><img alt="Sadhu Tech" src=/logo.png class=mainLogo></a></header> <main class=mt-16 style="display:flex;flex-flow:column;height:calc(100vh - 64px)"> <header class="flex flex-wrap fixed h-16 items-center left-0 p-0 secondary-bg top-0 w-screen z-30" style=padding-left:18px;margin-left:0><a href=/courses/reactJs/reactAdvanced/reactContextAPI?sideNav sapper-noscroll><i aria-hidden=true class="transition material-icons text-xl" style="margin:auto 0;vertical-align:top;cursor:pointer">menu </i></a> <a href=.><img alt="Sadhu Tech" src=/logo.png class=mainLogo></a></header> <div style=background:#fff;margin-left:0><div class=trinary-bg style=height:45px;width:100%;display:flex;flex-direction:row;align-items:center;padding-left:10px><div class=hideScrollbar style="display:flex;flex-direction:row;overflow-x:scroll;margin:0 auto;height:100%"><div class="unSelectable selected-chip" style="margin:0 5px;cursor:pointer;height:100%;display:flex;min-width:150px;padding:7px"><div class="svelte-a5tf4d wrapper" style=height:30px></div> <span style=padding-top:3px;padding-left:8px>React Js </span></div><div class=unSelectable style="margin:0 5px;cursor:pointer;height:100%;display:flex;min-width:150px;padding:7px"><div class="svelte-a5tf4d wrapper" style=height:30px></div> <span style=padding-top:3px;padding-left:8px>JavaScript </span></div><div class=unSelectable style="margin:0 5px;cursor:pointer;height:100%;display:flex;min-width:150px;padding:7px"><div class="svelte-a5tf4d wrapper" style=height:30px></div> <span style=padding-top:3px;padding-left:8px>TypeScript </span></div></div> <a href=. style="padding:0 6px;border-bottom:2px solid;margin:0 6px;cursor:pointer;font-size:13px;text-align:center">All Courses</a></div> <main> <div class=pageFull><div class=pageMain><div style=width:100%;height:0;background-color:#add8e6></div> <div class=content><div class=primary-color style=display:flex;align-items:center;margin-top:10px> <a href=/courses/reactJs/reactAdvanced/reactContextAPI#reactContextAPIAndUsingItInClassComponents><h1 class=bigHeading data-hash=reactContextAPIAndUsingItInClassComponents>React Context API and using it in Class Components</h1></a></div><div class=para style=padding-top:10px;white-space:pre-wrap><p>React Context API has become stable and can be used in production from React's version 16.3.0.<p><br><p>This chapter explains What is Context API, How it works and using Context API with class components.<p><a href=/courses/reactJs/reactHooks/useContextHook target=_blank>useContextHook</a> chapter explains using Context API with function components.</div><div class=primary-color style=display:flex;align-items:center;margin-top:10px><a href=/courses/reactJs/reactAdvanced/reactContextAPI#whyToUseContextAPI style=font-size:30px;margin-right:10px># </a> <a href=/courses/reactJs/reactAdvanced/reactContextAPI#whyToUseContextAPI><h1 class=smallHeading data-hash=whyToUseContextAPI>Why to use Context API</h1></a></div><div class=para style=padding-top:10px;white-space:pre-wrap><p>In React we used to face prop-drilling problem. This is an issue where you need to pass a prop down the component tree where few components wont use the prop and acts as a middle man and pass them to other component in a deep nested tree which uses that prop.<p><br><p>Here we may do many unnecessory props forwarding. So this problem can be solved with context api.</div><div class=primary-color style=display:flex;align-items:center;margin-top:10px><a href=/courses/reactJs/reactAdvanced/reactContextAPI#howContextAPIWorks style=font-size:30px;margin-right:10px># </a> <a href=/courses/reactJs/reactAdvanced/reactContextAPI#howContextAPIWorks><h1 class=smallHeading data-hash=howContextAPIWorks>How Context API works</h1></a></div><div class=para style=padding-top:10px;white-space:pre-wrap><p>Context is designed to share data that can be considered “global” for a tree of React components.<p><br><p>Context api gives us 2 components:<p> 1) <strong>Provider:</strong> This is a react component which holds state and common functions.<p> 2) <strong>Consumer:</strong> The consumer can access state and common functions of the provider.</div><div style="margin:10px;height:auto,marginTop: 10px"><div class="normal svelte-bnxs0y"> <div class="svelte-a5tf4d wrapper" style=height:px></div></div></div><div class=para style=padding-top:10px;white-space:pre-wrap><p>As the above picture illustrates all the consumers should be the childs of the provider.<p><br><p>The provider shares the state amoung the consumers irrespective of their nesting in the component tree.<p>When state changes all the consumers will be re-rendered with the new state.<p><br><p>Now let us see how we can implement context api in code.</div><div class=primary-color style=display:flex;align-items:center;margin-top:10px><a href=/courses/reactJs/reactAdvanced/reactContextAPI#reactCreateContext style=font-size:30px;margin-right:10px># </a> <a href=/courses/reactJs/reactAdvanced/reactContextAPI#reactCreateContext><h1 class=smallHeading data-hash=reactCreateContext>React.createContext</h1></a></div> <div class=primary-color style=display:flex;align-items:center;margin-top:10px><a href=/courses/reactJs/reactAdvanced/reactContextAPI#contextProvider style=font-size:30px;margin-right:10px># </a> <a href=/courses/reactJs/reactAdvanced/reactContextAPI#contextProvider><h1 class=smallHeading data-hash=contextProvider>Context.Provider</h1></a></div> <div class=para style=padding-top:10px;white-space:pre-wrap><p>This is the way we use <em style=background-color:#000;color:#fff> Context.Provider </em>.<p><em style=color:#fff;background-color:#000> Context.Provider </em> takes 2 props:<p> 1) <strong>value: </strong>This is an object that contains state and methods to update state.<p> 2) children prop.<p><br></div> <div class=para style=padding-top:10px;white-space:pre-wrap><p>This is an example of using <em style=background-color:#000;color:#fff> Provider </em><p>We are using <strong>ProductsProvider </strong>component as a provider. This component is a provider because we are returning <span style=background-color:#000;color:#fff>&lt;ProductsContext.Provider> </span><p><br><p>As told before we are giving 2 props for this provider. To the <strong>value prop</strong> we are passing state of this component and a function <strong>addProduct</strong>.</div><div class=primary-color style=display:flex;align-items:center;margin-top:10px><a href=/courses/reactJs/reactAdvanced/reactContextAPI#contextConsumer style=font-size:30px;margin-right:10px># </a> <a href=/courses/reactJs/reactAdvanced/reactContextAPI#contextConsumer><h1 class=smallHeading data-hash=contextConsumer>Context.Consumer</h1></a></div> <div class=para style=padding-top:10px;white-space:pre-wrap><p>This is the way we use <em style=color:#fff;background-color:#000> Context.Consumer </em>.<p><em style=background-color:#000;color:#fff> Context.Consumer </em>takes a single children prop which is function.<p><br><p>React passes <strong>contextValue</strong> to this function. So the React component that was returned by this function can use the <strong>contextValue</strong>. This <strong>contextValue</strong> is the value prop that we have passed to the <em style=color:#fff;background-color:#000> Provider </em>.<p><br></div> <div class=para style=padding-top:10px;white-space:pre-wrap><p>This is an example of using <em style=color:#fff;background-color:#000> Consumer </em><p>Lines 6-18 shows the usage of <em style=background-color:#000;color:#fff> Consumer </em>. We have returned a form to add a product from the Consumer children prop.<p>Here on submiting the product we are calling <em style=background-color:#000;color:#fff> contextValue.addProduct </em> this the function given the value object of the <span style=background-color:#000;color:#fff>ProductsContext.Provider </span> in the above example. So that state will be updated with the new product.<p><br><p>Now let us see the full code of this products example.</div> <div class=para style=padding-top:10px;white-space:pre-wrap><p>We know that Context API is designed to share data that can be considered “global” for a tree of React components. So <em style=background-color:#000;color:#fff>ProductsProvider</em><span style=background-color:#000;color:#fff> </span> should be at the root of <em style=background-color:#000;color:#fff> ProductsModule </em> tree(line no 8).<p><br><p><em style=background-color:#000;color:#fff> AddProduct </em> and <em style=color:#fff;background-color:#000> ProductList </em> are two independent components and no props passed, consumers in it share the state of <em style=color:#fff;background-color:#000>ProductsProvider</em><span style=color:#fff;background-color:#000> </span>. <p>When a product is submited in <em style=color:#fff;background-color:#000> AddProduct </em>, <em style=color:#fff;background-color:#000> contextValue.addProduct </em> function is called which updates products state in <em style=color:#fff;background-color:#000>ProductsProvider</em><span style=color:#fff;background-color:#000> </span>, So consumers in both <em style=color:#fff;background-color:#000> AddProduct </em> and <em style=background-color:#000;color:#fff> ProductList </em> are re-rendered with new state.<p><br><p><em style=background-color:#000;color:#fff> ProductItem </em> uses <a href=/courses/reactJs/reactComponents/reactMemo target=_blank>React.memo</a> to avaid unnecessory e-renders.<p><br><p>We had learned What is Context API, How it works and using Context API with class components.<p><a href=http://localhost:8080/courses/reactJs/reactHooks/useContextHook target=_blank>useContextHook</a> chapter explains using Context API with function components.</div></div> <div class=topicsNav style="margin:20px 10px 0 20px"><a href=/courses/reactJs/reactAdvanced/reactMemo><button class="button button border-solid border-solid bg-transparent border border-primary-400 font-medium hover:bg-primary-trans overflow-hidden px-4 py-2 relative rounded text-primary-500 text-sm uppercase" type=""> <i aria-hidden=true class="transition material-icons text-xl" style=margin-top:-2px;vertical-align:top;cursor:pointer>keyboard_arrow_left</i> React Memo</button></a> <a href=/courses/reactJs/reactAdvanced/reactHigherOrderComponents><button class="button button border-solid border-solid bg-transparent border border-primary-400 font-medium hover:bg-primary-trans overflow-hidden px-4 py-2 relative rounded text-primary-500 text-sm uppercase" type=""> React Higher Order Components <i aria-hidden=true class="transition material-icons text-xl" style=margin-top:-2px;vertical-align:top;cursor:pointer>keyboard_arrow_right</i></button></a></div> <div class="svelte-a5tf4d wrapper" style=width:100%></div></div> </div></main> <a href=/courses/reactJs/reactAdvanced/reactContextAPI?message style=position:fixed;bottom:25px;right:25px sapper-noscroll><button class="transition bg-primary-500 button elevation-3 flex font-medium hover:bg-primary-400 hover:elevation-5 items-center m-4 overflow-hidden p-4 px-4 relative rounded rounded-full text-sm text-white uppercase" type="" iconcolor=white><i aria-hidden=true class="transition material-icons text-xl" style="margin:auto 0;vertical-align:top;color:#fff;cursor:pointer">rate_review</i> </button></a> <div class=secondary-bg style=width:100%;text-align:center><div class="flex flex-wrap w-full" style="padding:12px 16px"><a href=/founder/manojSadhu style="cursor:pointer;text-align:center;padding:0 12px" class="lg:w-1/3 md:w-1/3 sm:w-1/2 xl:w-1/3"><img alt=Founder src=/founder/thumbnail.jpg height=40 style=border-radius:50%;margin-left:auto;margin-right:auto width=40> <p style=font-size:12px>Manoj Sadhu</p></a> <div class="lg:w-1/3 md:w-1/3 sm:w-1/2 xl:w-1/3" style="text-align:center;padding:0 12px"><p>Contact</p> <div><p style=font-size:12px><i aria-hidden=true class="primary-color material-icons text-xl transition" style="margin:auto 0;vertical-align:top;cursor:pointer">email</i> sadhu.manojkumar@gmail.com </div></div> <div class="lg:w-1/3 md:w-1/3 sm:w-1/2 xl:w-1/3" style="text-align:center;padding:0 12px"><p>Mobile apps</p> <div><i aria-hidden=true class="primary-color material-icons text-xl transition" style="margin:auto 0;vertical-align:top;cursor:pointer">android</i></div></div></div></div></div></main> </div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,{},{},null,{}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.9c259cf4.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main","/client/client.9c259cf4.js")}document.head.appendChild(s)</script> <script> if (
        !window.Promise ||
        ![].includes ||
        !Object.assign ||
        !window.Map ||
        !window.fetch
    ) {
        document["wr" + "ite"](
            '<script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=default,fetch,Array.prototype.find,Object.values"><\/script>'
        );
    } </script> 