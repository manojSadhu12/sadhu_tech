<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <base href=/ > <link href="https://fonts.googleapis.com/css2?family=Solway:wght@300;400&display=swap" rel=stylesheet> <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel=stylesheet> <link href=global.css rel=stylesheet> <link href=my_styles.css rel=stylesheet> <link href=prism.css rel=stylesheet> <link href=manifest.json rel=manifest> <link href=favicon.png rel=icon type=image/png> <script src=prismLineHighlight.js></script> <link href=../static/my_styles.css rel=stylesheet> <link href=client/main.588052814.css rel=stylesheet><link href=client/_layout.00b8b845.css rel=stylesheet><link href=client/client.f707559f.css rel=stylesheet><link href=client/Image.a80d16de.css rel=stylesheet><link href=client/index.b8f1b6e6.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>React Pure Components</title><meta content="React Pure Components" name=description><noscript id=sapper-head-end></noscript> </head> <body class=line-numbers> <div id=sapper> <header class="flex flex-wrap fixed h-16 items-center left-0 p-0 secondary-bg top-0 w-screen z-30" style=""><a href=.><img alt="Sadhu Tech" src=/logo.png class=mainLogo></a></header> <main class=mt-16 style="display:flex;flex-flow:column;height:calc(100vh - 64px)"> <header class="flex flex-wrap fixed h-16 items-center left-0 p-0 secondary-bg top-0 w-screen z-30" style=padding-left:18px;margin-left:0><a href=/courses/reactJs/reactComponents/reactPureComponents?sideNav sapper-noscroll><i aria-hidden=true class="transition material-icons text-xl" style="margin:auto 0;vertical-align:top;cursor:pointer">menu </i></a> <a href=.><img alt="Sadhu Tech" src=/logo.png class=mainLogo></a></header> <div style=background:#fff;margin-left:0><div class=trinary-bg style=height:45px;width:100%;display:flex;flex-direction:row;align-items:center;padding-left:10px><div class=hideScrollbar style="display:flex;flex-direction:row;overflow-x:scroll;margin:0 auto;height:100%"><div class="unSelectable selected-chip" style="margin:0 5px;cursor:pointer;height:100%;display:flex;min-width:150px;padding:7px"><div class="svelte-a5tf4d wrapper" style=height:30px></div> <span style=padding-top:3px;padding-left:8px>React Js </span></div><div class=unSelectable style="margin:0 5px;cursor:pointer;height:100%;display:flex;min-width:150px;padding:7px"><div class="svelte-a5tf4d wrapper" style=height:30px></div> <span style=padding-top:3px;padding-left:8px>JavaScript </span></div><div class=unSelectable style="margin:0 5px;cursor:pointer;height:100%;display:flex;min-width:150px;padding:7px"><div class="svelte-a5tf4d wrapper" style=height:30px></div> <span style=padding-top:3px;padding-left:8px>TypeScript </span></div></div> <a href=. style="padding:0 6px;border-bottom:2px solid;margin:0 6px;cursor:pointer;font-size:13px;text-align:center">All Courses</a></div> <main> <div class=pageFull><div class=pageMain><div style=width:100%;height:0;background-color:#add8e6></div> <div class=content><div class=primary-color style=display:flex;align-items:center;margin-top:10px> <a href=/courses/reactJs/reactComponents/reactPureComponents#reactPureComponents><h1 class=bigHeading data-hash=reactPureComponents>React Pure Components</h1></a></div><div class=para style=padding-top:10px;white-space:pre-wrap><p>Before understanding <em>Pure Components</em> first let us see what is a pure function in Javascript.</div><div class=primary-color style=display:flex;align-items:center;margin-top:10px><a href=/courses/reactJs/reactComponents/reactPureComponents#pureFunctions style=font-size:30px;margin-right:10px># </a> <a href=/courses/reactJs/reactComponents/reactPureComponents#pureFunctions><h1 class=smallHeading data-hash=pureFunctions>Pure Functions</h1></a></div><div class=para style=padding-top:10px;white-space:pre-wrap><ul><li><strong>Pure Functions</strong> always returns same result for same inputs passed.<li><strong>Pure Functions</strong> must not change the inputs passed.<li><strong>Pure Functions</strong> must not use on external variables.<li><strong>Pure Functions </strong>must not make any subscriptions or network calls.<li><strong>Pure Functions </strong>must return something based on inputs given.</ul><p><br></div> <div class=para style=padding-top:10px;white-space:pre-wrap><p>The above function is impure because it is changing given input</div> <div class=para style=padding-top:10px;white-space:pre-wrap><p>The above function is impure because it depends on variables outside of it.</div> <div class=para style=padding-top:10px;white-space:pre-wrap><p>The above function is impure because it depends return anything.<p><br></div> <div class=para style=padding-top:10px;white-space:pre-wrap><p>The above function is pure because it depends only on the givin input, and its output is always same for given input.<p><br><p>Now you have understood the concept of pure function. Now let's see how React applies this concept for components.</div><div class=primary-color style=display:flex;align-items:center;margin-top:10px><a href=/courses/reactJs/reactComponents/reactPureComponents#pureComponentInReact style=font-size:30px;margin-right:10px># </a> <a href=/courses/reactJs/reactComponents/reactPureComponents#pureComponentInReact><h1 class=smallHeading data-hash=pureComponentInReact>Pure Component in React</h1></a></div><div class=para style=padding-top:10px;white-space:pre-wrap><p>Just like pure function a Pure component in React renders same output for same state and props.<p>React provides <strong>React.PureComponent</strong> class, A class that extends <strong>React.PureComponent </strong>is treated as PureComponent.<p><br><p>A PureComponent is same as normal class based component, except PureComponent takes care of <a href=/reactJs/course/reactComponents/reactComponentLifecycle#shouldComponentUpdate target=_blank>shouldComponentUpdate</a>. It does a shallow comparision between existing <strong>this.props</strong> and <strong>this.state</strong> with the <strong>nextProps</strong> and <strong>nextState</strong>. If any references of props or stats are changed then shouldComponentUpdate return true else it returns false.</div><div class=primary-color style=display:flex;align-items:center;margin-top:10px><a href=/courses/reactJs/reactComponents/reactPureComponents#pureComponentsExample1 style=font-size:30px;margin-right:10px># </a> <a href=/courses/reactJs/reactComponents/reactPureComponents#pureComponentsExample1><h1 class=smallHeading data-hash=pureComponentsExample1>Pure components example 1</h1></a></div> <div class=para style=padding-top:10px;white-space:pre-wrap><p>Observe in the above example we are calling setState without any change in data but for every minute component is re-rendered with the same UI which is not good for performance.<p><br></div> <div class=para style=padding-top:10px;white-space:pre-wrap><p>Here we have extended <strong>React.PureComponent</strong> with the same code. Now if you observe component is not re-rendered for every minute because though we are calling <strong>setState() </strong>PureComonent makes shallow comparision between state and props, if there are any changes then only rendering logic will be executed.<p><br><p>Let us see another example</div><div class=primary-color style=display:flex;align-items:center;margin-top:10px><a href=/courses/reactJs/reactComponents/reactPureComponents#pureComponentsExample2 style=font-size:30px;margin-right:10px># </a> <a href=/courses/reactJs/reactComponents/reactPureComponents#pureComponentsExample2><h1 class=smallHeading data-hash=pureComponentsExample2>Pure components example 2</h1></a></div> <div class=para style=padding-top:10px;white-space:pre-wrap><p>Here for every minute we are adding a new item to the list. If we run this code output looks fine, but if we open the console we can see the <strong>Rendering log is printed for all the items in the list for every push in the list</strong>. That means all the items of the list are re-rendered. But this is not what we are expecting, we need to render only the newly added item not the entire list.<p><br><p>Here PureComponent can optimise this behaviour.<p>In the line number 35 let us change <em>ListItem</em> to extend <strong>React.PureComponent</strong>.</div> <div class=para style=padding-top:10px;white-space:pre-wrap><p>Now if we see the console we can notice that <strong>Rendering log </strong>for only newly added item is printed. That means only newly added item is created and existing List items are untouched.<p><br><p>For every push in the list <em>List</em> Component is re-rendered so <strong>shouldComponentUpdate</strong> for all the <em>ListItem</em> Components are called, as <em>ListItem</em> is a pure component and <strong>this.props.name </strong>is not changed existing List items are untouched.<p><br><p>So we can smartly use Pure components for better performance.</div><div class="note primary-transparent-bg svelte-1hxkol2" style=padding-top:10px;white-space:pre-wrap><ul><li><strong>React.PureComponent </strong>can boost performance.<li>Use <strong>this.forceUpdate() </strong>to re-render PureComponent ignoring changes in props or state.<li>If PureComponent skips a re-render all it's children components are also not re-rendered.</ul></div><div class=primary-color style=display:flex;align-items:center;margin-top:10px><a href=/courses/reactJs/reactComponents/reactPureComponents#pureComponentsWithReferenceDataTypes style=font-size:30px;margin-right:10px># </a> <a href=/courses/reactJs/reactComponents/reactPureComponents#pureComponentsWithReferenceDataTypes><h1 class=smallHeading data-hash=pureComponentsWithReferenceDataTypes>Pure Components with reference data types</h1></a></div><div class=para style=padding-top:10px;white-space:pre-wrap><p><strong>React.PureComponent</strong> only shallow compares the objects. So changes in the primitive datatypes can be easily detected. But in case of reference datatypes(object, array) React.PureComponent can only detect change if reference is changed.</div> <div class=para style=padding-top:10px;white-space:pre-wrap><p>This is simple PureComponent where the <strong>list</strong> is updated for every minute.<p>But the code doesn't work. Because if you observe the <strong>setState() </strong>from lines 13-20 we are mutating the original <em>itemsList</em>. So as reference is same and shallow comparison for itemsList gives false so <em>List</em> component skips re-render.</div> <div class=para style=padding-top:10px;white-space:pre-wrap><p>Observe lines from 13 to 18 we have used <span style=background-color:#e60000>es6 way of shallow cloning array</span>. As reference is changed this code works properly.<p><br><p>This is good sollution for small objects or arrays, but if we use deeply nested objects or arrays we should use deep cloning but this can cause negative performance impact.</div><div class="note primary-transparent-bg svelte-1hxkol2" style=padding-top:10px;white-space:pre-wrap><p>PureComponents are ment for performance optimisation, but use PureComponents for simple props and state, or use <strong>this.forceUpdate() </strong> when you know deep structure has changed. Or use <a href=https://immutable-js.github.io/immutable-js/ target=_blank>immutable.js objects</a>.</div></div> <div class=topicsNav style="margin:20px 10px 0 20px"><a href=/courses/reactJs/reactComponents/reactComponentLifecycle><button class="button button border-solid border-solid bg-transparent border border-primary-400 font-medium hover:bg-primary-trans overflow-hidden px-4 py-2 relative rounded text-primary-500 text-sm uppercase" type=""> <i aria-hidden=true class="transition material-icons text-xl" style=margin-top:-2px;vertical-align:top;cursor:pointer>keyboard_arrow_left</i> React Component Lifecycle</button></a> <a href=/courses/reactJs/reactAdvanced/reactVirtualDOM><button class="button button border-solid border-solid bg-transparent border border-primary-400 font-medium hover:bg-primary-trans overflow-hidden px-4 py-2 relative rounded text-primary-500 text-sm uppercase" type=""> React Virtual DOM <i aria-hidden=true class="transition material-icons text-xl" style=margin-top:-2px;vertical-align:top;cursor:pointer>keyboard_arrow_right</i></button></a></div> <div class="svelte-a5tf4d wrapper" style=width:100%></div></div> </div></main> <a href=/courses/reactJs/reactComponents/reactPureComponents?message style=position:fixed;bottom:25px;right:25px sapper-noscroll><button class="transition bg-primary-500 button elevation-3 flex font-medium hover:bg-primary-400 hover:elevation-5 items-center m-4 overflow-hidden p-4 px-4 relative rounded rounded-full text-sm text-white uppercase" type="" iconcolor=white><i aria-hidden=true class="transition material-icons text-xl" style="margin:auto 0;vertical-align:top;color:#fff;cursor:pointer">rate_review</i> </button></a> <div class=secondary-bg style=width:100%;text-align:center><div class="flex flex-wrap w-full" style="padding:12px 16px"><a href=/founder/manojSadhu style="cursor:pointer;text-align:center;padding:0 12px" class="lg:w-1/3 md:w-1/3 sm:w-1/2 xl:w-1/3"><img alt=Founder src=/founder/thumbnail.jpg height=40 style=border-radius:50%;margin-left:auto;margin-right:auto width=40> <p style=font-size:12px>Manoj Sadhu</p></a> <div class="lg:w-1/3 md:w-1/3 sm:w-1/2 xl:w-1/3" style="text-align:center;padding:0 12px"><p>Contact</p> <div><p style=font-size:12px><i aria-hidden=true class="primary-color material-icons text-xl transition" style="margin:auto 0;vertical-align:top;cursor:pointer">email</i> sadhu.manojkumar@gmail.com </div></div> <div class="lg:w-1/3 md:w-1/3 sm:w-1/2 xl:w-1/3" style="text-align:center;padding:0 12px"><p>Mobile apps</p> <div><i aria-hidden=true class="primary-color material-icons text-xl transition" style="margin:auto 0;vertical-align:top;cursor:pointer">android</i></div></div></div></div></div></main> </div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,{},{},null,{}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.f707559f.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main","/client/client.f707559f.js")}document.head.appendChild(s)</script> <script> if (
        !window.Promise ||
        ![].includes ||
        !Object.assign ||
        !window.Map ||
        !window.fetch
    ) {
        document["wr" + "ite"](
            '<script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=default,fetch,Array.prototype.find,Object.values"><\/script>'
        );
    } </script> 