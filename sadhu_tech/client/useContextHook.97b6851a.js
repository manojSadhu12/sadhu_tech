import{l as t,m as e,o as n,n as o,t as r,p as a,q as s,e as c,s as d,C as u,c as m,d as p,b as i,f as $,h as f,i as g,S as l,j as P,k as h}from"./client.f707559f.js";import"./Icon.b3087117.js";import"./Button.46d81a0e.js";import"./Image.a80d16de.js";import"./stores.ec09ff7a.js";import{H as x,P as C,a as w,C as b}from"./index.b8f1b6e6.js";function v(c){let d;const u=new x({props:{data:"useContext Hook",id:"useContextHook",isBig:"true"}}),m=new C({props:{data:'<p>This chapter explains using Context API with function components.</p><p>To learn What is Context API, How it works and using Context API with class components goto <a href="/courses/reactJs/reactComponents/reactContextAPI" target="_blank">React Context API</a> chapter.</p><p>This chapter assumes that you are familiar with <a href="/courses/reactJs/reactComponents/reactContextAPI" target="_blank">React Context API with class components</a>.</p>'}}),p=new x({props:{data:"Context Provider in function Component",id:"contextProviderInFunctionComponent"}}),i=new w({props:{language:"javascript",uid:"12425711-7498-11ea-a250-c3bf1d9f7091",data:"const ProductsProvider = (props) => {\n    const [products, setProducts] = useState([]);\n    return (\n        <ProductsContext.Provider value={{\n            products,\n            addProduct: (newProduct) => setProducts(currentProducts => [...currentProducts, newProduct])\n        }}>\n            {props.children}\n        </ProductsContext.Provider>\n    );\n};",pic:"",ratio:"4",highlight:"4-9"}}),$=new C({props:{data:"<p>This is an example of <em>Context.Provider</em>. Working with provider is exactly same in as how we do in class component.</p>"}}),f=new x({props:{data:"Context Consumer in function component with useContext",id:"contextConsumerInFunctionComponentWithUseContext"}}),g=new w({props:{language:"javascript",uid:"88dbab11-7498-11ea-a250-c3bf1d9f7091",data:"const AddProduct = () => {\n    const [productName, setProductName] = useState('');\n    const contextValue = useContext(ProductsContext);\n    return (\n        <form onSubmit={(e) => {\n            e.preventDefault();\n            contextValue.addProduct({name: productName, id: new Date().getTime()});\n            setProductName('')\n        }}>\n            <input placeholder='Product Name' value={productName}\n                   onChange={e => setProductName(e.target.value)}/>\n            <button type='submit'>Add Product</button>\n        </form>\n    );\n};",pic:"",ratio:"4",highlight:"3"}}),l=new C({props:{data:"<p>In class components we get <strong>contextValue</strong> from <em>Context.Consumer</em> children prop function. But in function component <em>useContext</em> gives the <strong>contextValue</strong>. And rest all is same.</p><p><br></p><p>Now let us see the full example Context api in function components.</p>"}}),P=new w({props:{language:"javascript",uid:"ebbf8671-7498-11ea-a250-c3bf1d9f7091",data:"import React, {Component, useContext, useState} from 'react';\nimport './App.css';\nimport ReactDOM from \"react-dom\";\n\nclass ProductsModule extends Component {\n    render() {\n        return (\n            <ProductsProvider>\n                <React.Fragment>\n                    <AddProduct/>\n                    <ProductList/>\n                </React.Fragment>\n            </ProductsProvider>\n        );\n    }\n}\n\nconst ProductsContext = React.createContext(null);\n\nconst ProductsProvider = (props) => {\n    const [products, setProducts] = useState([]);\n    return (\n        <ProductsContext.Provider value={{\n            products,\n            addProduct: (newProduct) => setProducts(currentProducts => [...currentProducts, newProduct])\n        }}>\n            {props.children}\n        </ProductsContext.Provider>\n    );\n};\n\nconst AddProduct = () => {\n    const [productName, setProductName] = useState('');\n    const contextValue = useContext(ProductsContext);\n    return (\n        <form onSubmit={(e) => {\n            e.preventDefault();\n            contextValue.addProduct({name: productName, id: new Date().getTime()});\n            setProductName('')\n        }}>\n            <input placeholder='Product Name' value={productName}\n                   onChange={e => setProductName(e.target.value)}/>\n            <button type='submit'>Add Product</button>\n        </form>\n    );\n};\n\nconst ProductItem = React.memo(({product}) => <p>{product.name}</p>);\n\nconst ProductList = () => {\n    const contextValue = useContext(ProductsContext);\n\n    return (\n        <React.Fragment>\n            {contextValue.products.map(product => <ProductItem key={product.id} product={product}/>)}\n        </React.Fragment>\n    );\n};\n\nexport default ProductsModule;\n\nReactDOM.render(<ProductsModule/>, document.getElementById('root'));",pic:"",ratio:"4",highlight:"8-13,23-28,34,51"}}),h=new C({props:{data:'<p>We know that Context API is designed to share data that can be considered “global” for a tree of React components. So <em>ProductsProvider</em> should be at the root of <em>ProductsModule</em> tree(line no 8).</p><p><br></p><p><em>AddProduct</em> and <em>ProductList</em> are two independent components and no props passed, from <em>useContext</em>(line no: 34,51)they share the state of <em>ProductsProvider</em>.</p><p><br></p><p>When a product is submited in <em>AddProduct</em>, <em>contextValue.addProduct</em> function is called which updates products state in <em>ProductsProvider</em>, So both <em>AddProduct</em> and <em>ProductList</em> are re-rendered with new state.</p><p><br></p><p><em>ProductItem</em> uses <a href="http://localhost:8080/courses/reactJs/reactComponents/reactMemo" target="_blank">React.memo</a> to avaid unnecessory e-renders.</p><p><br></p><p>We had learned using Context API with function components.</p><p>To learn What is Context API, How it works and using Context API with class components goto <a href="http://localhost:8080/courses/reactJs/reactComponents/reactContextAPI" target="_blank">React Context API</a> chapter.</p>'}});return{c(){t(u.$$.fragment),t(m.$$.fragment),t(p.$$.fragment),t(i.$$.fragment),t($.$$.fragment),t(f.$$.fragment),t(g.$$.fragment),t(l.$$.fragment),t(P.$$.fragment),t(h.$$.fragment)},l(t){e(u.$$.fragment,t),e(m.$$.fragment,t),e(p.$$.fragment,t),e(i.$$.fragment,t),e($.$$.fragment,t),e(f.$$.fragment,t),e(g.$$.fragment,t),e(l.$$.fragment,t),e(P.$$.fragment,t),e(h.$$.fragment,t)},m(t,e){n(u,t,e),n(m,t,e),n(p,t,e),n(i,t,e),n($,t,e),n(f,t,e),n(g,t,e),n(l,t,e),n(P,t,e),n(h,t,e),d=!0},p:o,i(t){d||(r(u.$$.fragment,t),r(m.$$.fragment,t),r(p.$$.fragment,t),r(i.$$.fragment,t),r($.$$.fragment,t),r(f.$$.fragment,t),r(g.$$.fragment,t),r(l.$$.fragment,t),r(P.$$.fragment,t),r(h.$$.fragment,t),d=!0)},o(t){a(u.$$.fragment,t),a(m.$$.fragment,t),a(p.$$.fragment,t),a(i.$$.fragment,t),a($.$$.fragment,t),a(f.$$.fragment,t),a(g.$$.fragment,t),a(l.$$.fragment,t),a(P.$$.fragment,t),a(h.$$.fragment,t),d=!1},d(t){s(u,t),s(m,t),s(p,t),s(i,t),s($,t),s(f,t),s(g,t),s(l,t),s(P,t),s(h,t)}}}function A(o){let l,P,h;const x=new b({props:{$$slots:{default:[v]},$$scope:{ctx:o}}});return{c(){l=c("meta"),P=d(),t(x.$$.fragment),this.h()},l(t){const n=u('[data-svelte="svelte-29u6kb"]',document.head);l=m(n,"META",{name:!0,content:!0}),n.forEach(p),P=i(t),e(x.$$.fragment,t),this.h()},h(){document.title="useContext Hook",$(l,"name","description"),$(l,"content","useContext Hook")},m(t,e){f(document.head,l),g(t,P,e),n(x,t,e),h=!0},p(t,[e]){const n={};1&e&&(n.$$scope={dirty:e,ctx:t}),x.$set(n)},i(t){h||(r(x.$$.fragment,t),h=!0)},o(t){a(x.$$.fragment,t),h=!1},d(t){p(l),t&&p(P),s(x,t)}}}export default class extends l{constructor(t){super(),P(this,t,null,A,h,{})}}
